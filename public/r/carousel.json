{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "carousel",
  "type": "registry:block",
  "title": "Gallery",
  "description": "A production-ready image gallery with auto-advance, navigation controls, progress bar, and smooth transitions",
  "registryDependencies": [
    "button",
    "card",
    "progress"
  ],
  "files": [
    {
      "path": "registry/new-york/blocks/carousel/carousel.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { Button } from \"@/registry/new-york/ui/button\"\nimport { Card } from \"@/registry/new-york/ui/card\"\nimport { Progress } from \"@/registry/new-york/ui/progress\"\nimport { cn } from \"@/lib/utils\"\n\ninterface CarouselContextValue {\n  currentIndex: number\n  totalItems: number\n  goToNext: () => void\n  goToPrevious: () => void\n  goToIndex: (index: number) => void\n  isTransitioning: boolean\n}\n\nconst CarouselContext = React.createContext<CarouselContextValue | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n  if (!context) {\n    throw new Error(\"Carousel components must be used within Carousel\")\n  }\n  return context\n}\n\nexport interface CarouselProps {\n  children: React.ReactNode\n  showProgress?: boolean\n  autoPlay?: boolean\n  autoPlayInterval?: number\n  className?: string\n  transition?: \"fade\" | \"slide\"\n  onIndexChange?: (index: number) => void\n}\n\n// Sub-components defined first\nconst CarouselItem = ({\n  children,\n  className,\n}: {\n  children: React.ReactNode\n  className?: string\n}) => {\n  return <div className={cn(\"w-full\", className)}>{children}</div>\n}\n\nconst CarouselNavigation = ({\n  position = \"middle\",\n  variant = \"ghost\",\n  showText = false,\n  previousLabel = \"Previous\",\n  nextLabel = \"Next\",\n  previousIcon,\n  nextIcon,\n  className,\n}: {\n  position?: \"top\" | \"middle\" | \"bottom\"\n  variant?: \"default\" | \"destructive\" | \"outline\" | \"secondary\" | \"ghost\" | \"link\"\n  showText?: boolean\n  previousLabel?: string\n  nextLabel?: string\n  previousIcon?: React.ReactNode\n  nextIcon?: React.ReactNode\n  className?: string\n}) => {\n  const { goToNext, goToPrevious, isTransitioning, totalItems } = useCarousel()\n\n  if (totalItems <= 1) return null\n\n  const positionClasses = {\n    top: \"top-4\",\n    middle: \"top-1/2 -translate-y-1/2\",\n    bottom: \"bottom-4\",\n  }\n\n  const positionClass = positionClasses[position]\n  const PreviousIcon = previousIcon || <ChevronLeft className=\"h-6 w-6\" />\n  const NextIcon = nextIcon || <ChevronRight className=\"h-6 w-6\" />\n\n  return (\n    <>\n      <Button\n        variant={variant}\n        size={showText ? \"default\" : \"icon\"}\n        className={cn(\n          \"absolute left-4 z-20 bg-background/80 backdrop-blur-sm hover:bg-background/90\",\n          positionClass,\n          className\n        )}\n        onClick={goToPrevious}\n        disabled={isTransitioning}\n        aria-label=\"Previous\"\n      >\n        {PreviousIcon}\n        {showText && <span className=\"ml-2\">{previousLabel}</span>}\n      </Button>\n      <Button\n        variant={variant}\n        size={showText ? \"default\" : \"icon\"}\n        className={cn(\n          \"absolute right-4 z-20 bg-background/80 backdrop-blur-sm hover:bg-background/90\",\n          positionClass,\n          className\n        )}\n        onClick={goToNext}\n        disabled={isTransitioning}\n        aria-label=\"Next\"\n      >\n        {showText && <span className=\"mr-2\">{nextLabel}</span>}\n        {NextIcon}\n      </Button>\n    </>\n  )\n}\n\nconst CarouselIndicators = () => {\n  const { currentIndex, totalItems, goToIndex, isTransitioning } = useCarousel()\n\n  if (totalItems <= 1) return null\n\n  return (\n    <div className=\"flex items-center justify-center gap-2 px-6 py-6\">\n      {Array.from({ length: totalItems }).map((_, index) => (\n        <button\n          key={index}\n          onClick={() => goToIndex(index)}\n          disabled={isTransitioning}\n          className={cn(\n            \"h-2 rounded-full transition-all\",\n            index === currentIndex\n              ? \"w-8 bg-primary\"\n              : \"w-2 bg-primary/30 hover:bg-primary/50\",\n            isTransitioning && \"cursor-not-allowed opacity-50\"\n          )}\n          aria-label={`Go to item ${index + 1}`}\n        />\n      ))}\n    </div>\n  )\n}\n\nconst CarouselCounter = () => {\n  const { currentIndex, totalItems } = useCarousel()\n\n  if (totalItems <= 1) return null\n\n  return (\n    <div className=\"absolute bottom-4 right-4 z-20 rounded-md bg-background/80 px-3 py-1 text-sm font-medium backdrop-blur-sm\">\n      {currentIndex + 1} / {totalItems}\n    </div>\n  )\n}\n\nconst CarouselRoot = ({\n  children,\n  showProgress = true,\n  autoPlay = true,\n  autoPlayInterval = 5000,\n  className,\n  transition = \"fade\",\n  onIndexChange,\n}: CarouselProps) => {\n  const [currentIndex, setCurrentIndex] = React.useState(0)\n  const [isPaused, setIsPaused] = React.useState(false)\n  const [progress, setProgress] = React.useState(0)\n  const [isTransitioning, setIsTransitioning] = React.useState(false)\n  const timerRef = React.useRef<NodeJS.Timeout | null>(null)\n  const progressIntervalRef = React.useRef<NodeJS.Timeout | null>(null)\n\n  // Filter children to only get CarouselItem components\n  const allChildren = React.Children.toArray(children)\n  const items = allChildren.filter((child) => {\n    return React.isValidElement(child) && child.type === CarouselItem\n  })\n  const otherChildren = allChildren.filter((child) => {\n    return React.isValidElement(child) && child.type !== CarouselItem\n  })\n  \n  const totalItems = items.length\n  const isSingleItem = totalItems === 1\n\n  const goToNext = React.useCallback(() => {\n    if (isTransitioning || totalItems === 0) return\n    setIsTransitioning(true)\n    const newIndex = (currentIndex + 1) % totalItems\n    setCurrentIndex(newIndex)\n    onIndexChange?.(newIndex)\n    setProgress(0)\n    setTimeout(() => setIsTransitioning(false), 300)\n  }, [totalItems, isTransitioning, currentIndex, onIndexChange])\n\n  const goToPrevious = React.useCallback(() => {\n    if (isTransitioning || totalItems === 0) return\n    setIsTransitioning(true)\n    const newIndex = (currentIndex - 1 + totalItems) % totalItems\n    setCurrentIndex(newIndex)\n    onIndexChange?.(newIndex)\n    setProgress(0)\n    setTimeout(() => setIsTransitioning(false), 300)\n  }, [totalItems, isTransitioning, currentIndex, onIndexChange])\n\n  const goToIndex = React.useCallback(\n    (index: number) => {\n      if (isTransitioning || index === currentIndex || index < 0 || index >= totalItems) return\n      setIsTransitioning(true)\n      setCurrentIndex(index)\n      onIndexChange?.(index)\n      setProgress(0)\n      setTimeout(() => setIsTransitioning(false), 300)\n    },\n    [currentIndex, isTransitioning, totalItems, onIndexChange]\n  )\n\n  // Auto-advance functionality\n  React.useEffect(() => {\n    if (!autoPlay || isPaused || isSingleItem || totalItems === 0) return\n\n    // Clear existing timers\n    if (timerRef.current) clearTimeout(timerRef.current)\n    if (progressIntervalRef.current) clearInterval(progressIntervalRef.current)\n\n    // Reset progress\n    setProgress(0)\n\n    // Progress update interval (update every 50ms for smooth animation)\n    const progressStep = (50 / autoPlayInterval) * 100\n    progressIntervalRef.current = setInterval(() => {\n      setProgress((prev) => {\n        const next = prev + progressStep\n        return next >= 100 ? 100 : next\n      })\n    }, 50)\n\n    // Auto-advance timer\n    timerRef.current = setTimeout(() => {\n      goToNext()\n    }, autoPlayInterval)\n\n    return () => {\n      if (timerRef.current) clearTimeout(timerRef.current)\n      if (progressIntervalRef.current) clearInterval(progressIntervalRef.current)\n    }\n  }, [autoPlay, isPaused, currentIndex, autoPlayInterval, goToNext, isSingleItem, totalItems])\n\n  // Keyboard navigation\n  React.useEffect(() => {\n    if (isSingleItem || totalItems === 0) return\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === \"ArrowLeft\") {\n        e.preventDefault()\n        goToPrevious()\n      } else if (e.key === \"ArrowRight\") {\n        e.preventDefault()\n        goToNext()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [goToNext, goToPrevious, isSingleItem, totalItems])\n\n  // Handle edge cases after all hooks\n  if (totalItems === 0) {\n    return (\n      <Card className={cn(\"flex items-center justify-center p-12\", className)}>\n        <p className=\"text-muted-foreground\">No content to display</p>\n      </Card>\n    )\n  }\n\n  const contextValue: CarouselContextValue = {\n    currentIndex,\n    totalItems,\n    goToNext,\n    goToPrevious,\n    goToIndex,\n    isTransitioning,\n  }\n\n  return (\n    <CarouselContext.Provider value={contextValue}>\n      <Card\n        className={cn(\"overflow-hidden p-0\", className)}\n        onMouseEnter={() => autoPlay && setIsPaused(true)}\n        onMouseLeave={() => autoPlay && setIsPaused(false)}\n      >\n      {/* Step Progress */}\n      {showProgress && !isSingleItem && (\n        <div className=\"px-6 pt-6\">\n          <div className=\"flex gap-1\">\n            {items.map((_, index) => {\n              const isActive = index === currentIndex\n              const isComplete = index <= currentIndex\n              const stepProgress = isComplete ? 100 : 0\n              \n              return (\n                <div\n                  key={index}\n                  className=\"h-1 flex-1 rounded-full bg-primary/20 overflow-hidden\"\n                >\n                  <div\n                    className=\"h-full bg-primary transition-all duration-300\"\n                    style={{\n                      width: `${stepProgress}%`\n                    }}\n                  />\n                </div>\n              )\n            })}\n          </div>\n        </div>\n      )}\n\n        {/* Main Content Container */}\n        <div className=\"relative w-full overflow-hidden\">\n          {/* Content Items */}\n          {items.map((item, index) => (\n            <div\n              key={index}\n              className={cn(\n                \"transition-all duration-300\",\n                transition === \"fade\" && [\n                  index === currentIndex\n                    ? \"opacity-100 z-10 relative\"\n                    : \"opacity-0 z-0 absolute inset-0\",\n                ],\n                transition === \"slide\" && [\n                  index === currentIndex\n                    ? \"translate-x-0 z-10 relative\"\n                    : index < currentIndex\n                      ? \"-translate-x-full z-0 absolute inset-0\"\n                      : \"translate-x-full z-0 absolute inset-0\",\n                ]\n              )}\n            >\n              {item}\n            </div>\n          ))}\n\n          {/* Render other children (Navigation, Indicators, Counter, etc.) */}\n          {otherChildren}\n        </div>\n      </Card>\n    </CarouselContext.Provider>\n  )\n}\n\n// Export all components\nexport const Carousel = Object.assign(CarouselRoot, {\n  Item: CarouselItem,\n  Navigation: CarouselNavigation,\n  Indicators: CarouselIndicators,\n  Counter: CarouselCounter,\n})\n\n// Also export sub-components individually\nexport { CarouselItem, CarouselNavigation, CarouselIndicators, CarouselCounter }\n\n// Legacy export for backward compatibility\nexport { Carousel as Gallery }\n",
      "type": "registry:block"
    },
    {
      "path": "registry/new-york/examples/carousel-demo.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport Image from \"next/image\"\nimport {\n  Carousel,\n  CarouselItem,\n  CarouselNavigation,\n  CarouselIndicators,\n  CarouselCounter\n} from \"@/registry/new-york/blocks/carousel/carousel\"\nimport { Button } from \"@/registry/new-york/ui/button\"\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from \"@/registry/new-york/ui/card\"\n\nexport function CarouselDemo() {\n  const [currentStep, setCurrentStep] = React.useState(0)\n\n  return (\n    <div className=\"space-y-12\">\n      {/* Image Gallery */}\n      <div>\n        <h2 className=\"mb-4 text-2xl font-bold\">Image Gallery</h2>\n        <Carousel\n          showProgress={true}\n          autoPlay={true}\n          autoPlayInterval={5000}\n          transition=\"fade\"\n        >\n          <CarouselItem className=\"aspect-video relative\">\n            <Image\n              src=\"https://images.unsplash.com/photo-1682687220742-aba13b6e50ba?w=1200&q=80\"\n              alt=\"Mountain landscape\"\n              fill\n              className=\"object-cover\"\n            />\n            <CarouselNavigation />\n            <CarouselCounter />\n          </CarouselItem>\n          <CarouselItem className=\"aspect-video relative\">\n            <Image\n              src=\"https://images.unsplash.com/photo-1682687221038-404cb8830901?w=1200&q=80\"\n              alt=\"Ocean waves\"\n              fill\n              className=\"object-cover\"\n            />\n            <CarouselNavigation />\n            <CarouselCounter />\n          </CarouselItem>\n          <CarouselItem className=\"aspect-video relative\">\n            <Image\n              src=\"https://images.unsplash.com/photo-1682687982501-1e58ab814714?w=1200&q=80\"\n              alt=\"Forest path\"\n              fill\n              className=\"object-cover\"\n            />\n            <CarouselNavigation />\n            <CarouselCounter />\n          </CarouselItem>\n          <CarouselIndicators />\n        </Carousel>\n      </div>\n\n      {/* Multi-Step Form */}\n      <div>\n        <h2 className=\"mb-4 text-2xl font-bold\">Multi-Step Form</h2>\n        <Carousel\n          showProgress={true}\n          autoPlay={false}\n          onIndexChange={setCurrentStep}\n        >\n          <CarouselItem>\n            <Card>\n              <CardHeader>\n                <CardTitle>Step 1: Personal Information</CardTitle>\n                <CardDescription>Tell us about yourself</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4 pb-20\">\n                <div>\n                  <label className=\"text-sm font-medium\">Full Name</label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full mt-1 px-3 py-2 border rounded-md\"\n                    placeholder=\"John Doe\"\n                  />\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium\">Email</label>\n                  <input\n                    type=\"email\"\n                    className=\"w-full mt-1 px-3 py-2 border rounded-md\"\n                    placeholder=\"john@example.com\"\n                  />\n                </div>\n              </CardContent>\n            </Card>\n          </CarouselItem>\n\n          <CarouselItem>\n            <Card>\n              <CardHeader>\n                <CardTitle>Step 2: Preferences</CardTitle>\n                <CardDescription>Choose your settings</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4 pb-20\">\n                <div>\n                  <label className=\"text-sm font-medium\">Theme</label>\n                  <select className=\"w-full mt-1 px-3 py-2 border rounded-md\">\n                    <option>Light</option>\n                    <option>Dark</option>\n                    <option>Auto</option>\n                  </select>\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium\">Language</label>\n                  <select className=\"w-full mt-1 px-3 py-2 border rounded-md\">\n                    <option>English</option>\n                    <option>Spanish</option>\n                    <option>French</option>\n                  </select>\n                </div>\n              </CardContent>\n            </Card>\n          </CarouselItem>\n\n          <CarouselItem>\n            <Card>\n              <CardHeader>\n                <CardTitle>Step 3: Review</CardTitle>\n                <CardDescription>Confirm your information</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4 pb-20\">\n                <div className=\"space-y-2\">\n                  <p className=\"text-sm\"><strong>Name:</strong> John Doe</p>\n                  <p className=\"text-sm\"><strong>Email:</strong> john@example.com</p>\n                  <p className=\"text-sm\"><strong>Theme:</strong> Dark</p>\n                  <p className=\"text-sm\"><strong>Language:</strong> English</p>\n                </div>\n                <Button className=\"w-full\">Complete Setup</Button>\n              </CardContent>\n            </Card>\n          </CarouselItem>\n          <CarouselNavigation\n            position=\"bottom\"\n            showText={true}\n            previousLabel=\"Prev\"\n            nextLabel=\"Next\"\n          />\n        </Carousel>\n        <p className=\"mt-4 text-center text-sm text-muted-foreground\">\n          Current step: {currentStep + 1} of 3\n        </p>\n      </div>\n\n      {/* Product Showcase */}\n      <div>\n        <h2 className=\"mb-4 text-2xl font-bold\">Product Showcase</h2>\n        <Carousel\n          showProgress={false}\n          autoPlay={true}\n          autoPlayInterval={4000}\n          transition=\"slide\"\n        >\n          <CarouselItem>\n            <div className=\"p-8 text-center\">\n              <div className=\"mb-6 text-6xl\">ðŸŽ¨</div>\n              <h3 className=\"text-2xl font-bold mb-2\">Design Tools</h3>\n              <p className=\"text-muted-foreground mb-4\">\n                Professional design tools for creative professionals\n              </p>\n              <Button>Learn More</Button>\n            </div>\n          </CarouselItem>\n          <CarouselItem>\n            <div className=\"p-8 text-center\">\n              <div className=\"mb-6 text-6xl\">âš¡</div>\n              <h3 className=\"text-2xl font-bold mb-2\">Fast Performance</h3>\n              <p className=\"text-muted-foreground mb-4\">\n                Lightning-fast rendering and optimized workflows\n              </p>\n              <Button>Learn More</Button>\n            </div>\n          </CarouselItem>\n          <CarouselItem>\n            <div className=\"p-8 text-center\">\n              <div className=\"mb-6 text-6xl\">ðŸ”’</div>\n              <h3 className=\"text-2xl font-bold mb-2\">Secure & Private</h3>\n              <p className=\"text-muted-foreground mb-4\">\n                Enterprise-grade security for your data\n              </p>\n              <Button>Learn More</Button>\n            </div>\n          </CarouselItem>\n          <CarouselNavigation />\n          <CarouselIndicators />\n        </Carousel>\n      </div>\n\n      {/* Testimonials */}\n      <div>\n        <h2 className=\"mb-4 text-2xl font-bold\">Customer Testimonials</h2>\n        <Carousel\n          showProgress={true}\n          autoPlay={true}\n          autoPlayInterval={6000}\n          transition=\"fade\"\n        >\n          <CarouselItem>\n            <div className=\"p-8 text-center max-w-2xl mx-auto\">\n              <p className=\"text-lg italic mb-4\">\n                &ldquo;This component library has completely transformed our development workflow.\n                The quality and attention to detail is outstanding.&rdquo;\n              </p>\n              <p className=\"font-semibold\">Sarah Johnson</p>\n              <p className=\"text-sm text-muted-foreground\">Lead Developer at TechCorp</p>\n            </div>\n          </CarouselItem>\n          <CarouselItem>\n            <div className=\"p-8 text-center max-w-2xl mx-auto\">\n              <p className=\"text-lg italic mb-4\">\n                &ldquo;Incredibly flexible and easy to customize. We built our entire design\n                system on top of these components.&rdquo;\n              </p>\n              <p className=\"font-semibold\">Michael Chen</p>\n              <p className=\"text-sm text-muted-foreground\">CTO at StartupXYZ</p>\n            </div>\n          </CarouselItem>\n          <CarouselItem>\n            <div className=\"p-8 text-center max-w-2xl mx-auto\">\n              <p className=\"text-lg italic mb-4\">\n                &ldquo;The flexible pattern makes it so easy to build exactly what we need.\n                Highly recommended!&rdquo;\n              </p>\n              <p className=\"font-semibold\">Emily Rodriguez</p>\n              <p className=\"text-sm text-muted-foreground\">Senior Engineer at BigCo</p>\n            </div>\n          </CarouselItem>\n          <CarouselIndicators />\n        </Carousel>\n      </div>\n    </div>\n  )\n}\n\n// Keep old name for backward compatibility\nexport { CarouselDemo as GalleryDemo }\n",
      "type": "registry:example"
    }
  ]
}